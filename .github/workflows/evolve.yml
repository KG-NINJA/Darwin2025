name: ğŸ§¬ Darwin2025 Swarm Evolver
on:
  schedule:
    - cron: "0 3 * * *"
  workflow_dispatch:

permissions:
  contents: write

jobs:
  evolve:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: ğŸ§  Evolve each agent
        uses: openai/codex-action@v1
        with:
          openai-api-key: ${{ secrets.OPENAI_API_KEY }}
          model: gpt-4o-mini
          safety-strategy: unsafe
          prompt: |
            ã‚ãªãŸã¯ç¾¤ä½“é€²åŒ–ã‚’è¦³æ¸¬ã™ã‚‹AIç ”ç©¶è€…ã§ã™ã€‚
            agentsä»¥ä¸‹ã®å„ãƒ•ã‚©ãƒ«ãƒ€ã«ã‚ã‚‹evol.mdã‚’é †ã«èª­ã¿ã€
            ãã‚Œãã‚Œã«æ—¥æ¬¡æ›´æ–°ã‚’è¿½åŠ ã—ã¾ã™ã€‚
            ã•ã‚‰ã«ã€å„å­ã®æ”¹å–„ã‚’ä»–ã®å­ã¸ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã™ã‚‹è¦ç´„ã‚’ä½œæˆã—ã€
            ãƒ«ãƒ¼ãƒˆã® evol_master.md ã«è¨˜éŒ²ã—ã¾ã™ã€‚
            å‡ºåŠ›ã¯æ—¥æœ¬èªã§è¡Œã„ã€æ§‹é€ ã‚’ä¿æŒã—ã¾ã™ã€‚
          input-files: |
            agents/child_1/evol.md
            agents/child_2/evol.md
            agents/child_3/evol.md
          output-file: evol_master.md

      - name: ğŸ’¾ Commit updates
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add agents/ evol_master.md
          git diff --staged --quiet || git commit -m "ğŸ§¬ Swarm co-evolution update"
          git push
